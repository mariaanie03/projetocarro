<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garagem Virtual Interativa</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/estilo.css">
</head>
<body>
    <header class="app-header">
        <h1>Garagem Virtual Interativa</h1>
        <button id="btn-abrir-login-topo" class="btn-header-login">Login</button>
    </header>

    <div class="container">
        <!-- SEÇÃO 1: GARAGEM E FORMULÁRIO -->
        <div class="selecao-veiculo section-box">
            <h2>Veículos na Garagem</h2>
            <div id="botoes-veiculo"></div>
            <hr>
            <h2>Adicionar Novo Veículo</h2>
            <form id="form-add-veiculo">
                <label for="tipo-veiculo">Tipo:</label>
                <select id="tipo-veiculo" required>
                    <option value="" disabled selected>Selecione</option>
                    <option value="Carro">Carro</option>
                    <option value="CarroEsportivo">Carro Esportivo</option>
                    <option value="Caminhao">Caminhão</option>
                </select>
                <label for="placa-veiculo">Placa:</label>
                <input type="text" id="placa-veiculo" placeholder="Ex: ABC1D23 ou ABC1234" required minlength="7" maxlength="7" pattern="^[A-Z]{3}\d{1}[A-Z]{1}\d{2}$|^[A-Z]{3}\d{4}$" title="Formato de placa inválido (Ex: ABC1D23 ou ABC1234)">  
                
                <label for="marca-veiculo">Marca:</label>
                <input type="text" id="marca-veiculo" placeholder="Ex: Volkswagen" required>
                <label for="modelo-veiculo">Modelo:</label>
                <input type="text" id="modelo-veiculo" placeholder="Ex: Fusca" required>
                <label for="ano-veiculo">Ano:</label>
                <input type="number" id="ano-veiculo" placeholder="Ex: 1975" required min="1900">
                <label for="cor-veiculo">Cor:</label>
                <input type="text" id="cor-veiculo" placeholder="Ex: Azul" required>
                <button type="submit">Adicionar à Garagem</button>
            </form>
        </div>

        <!-- SEÇÃO 2: DISPLAY E INTERAÇÃO -->
        <div class="display-veiculo section-box">
            <h2>Veículo Selecionado: <span id="nome-veiculo-selecionado">Nenhum</span></h2>
            <div id="alerta-container"></div>
            <div id="informacoes-veiculo">
                <p>Selecione um veículo na garagem.</p>
            </div>
            <div id="velocimetro-container">
                <label for="velocimetro">Velocidade:</label>
                <progress id="velocimetro" value="0" max="100"></progress>
                <span id="velocidade-texto">0 km/h</span>
            </div>
            <div id="controles-veiculo" style="display: none;">
                <h3>Ações:</h3>
                <button data-acao="ligar">Ligar</button>
                <button data-acao="desligar">Desligar</button>
                <button data-acao="acelerar">Acelerar</button>
                <button data-acao="frear">Frear</button>
                <button data-acao="buzinar">Buzinar</button>
                <button data-acao="ativarTurbo" class="acao-esportivo" style="display: none;">Ativar Turbo</button>
                <button data-acao="desativarTurbo" class="acao-esportivo" style="display: none;">Desativar Turbo</button>
            </div>
        </div>

        <!-- SEÇÃO 3: MANUTENÇÃO E EXTRAS (ATUALIZADA) -->
        <div class="manutencao-veiculo section-box">
            <h2>Manutenção & Extras</h2>
            <div id="historico-manutencao">
                 <p>Selecione um veículo para ver o histórico.</p>
            </div>
            <hr>
            <div id="form-manutencao-container" style="display: none;">
                <h3>Registrar Nova Manutenção</h3>
                <form id="form-add-manutencao">
                    <label for="data-manutencao">Data:</label>
                    <input type="date" id="data-manutencao" required>

                    <label for="descricao-servico-input">Descrição do Serviço:</label>
                    <input type="text" id="descricao-servico-input" placeholder="Ex: Troca de óleo e filtro de ar" required>

                    <label for="quilometragem-manutencao">Quilometragem (Opcional):</label>
                    <input type="number" id="quilometragem-manutencao" placeholder="Ex: 85000" min="0">

                    <label for="custo-manutencao">Custo (R$):</label>
                    <input type="number" id="custo-manutencao" placeholder="Ex: 350.50" min="0" step="0.01" required>

                    <button type="submit">Registrar Manutenção</button>
                </form>
            </div>
            
            <hr>
           <div id="previsao-tempo-container">
                <h3>Previsão do Tempo</h3>
                <form id="form-buscar-previsao">
                    <label for="cidade-input">Digite o nome de uma cidade:</label>
                    <input type="text" id="cidade-input" placeholder="Ex: Curitiba" required>
                    <button type="submit">Buscar Previsão</button>
                </form>
                <div id="previsao-resultado" class="api-box">
                    <p>Digite uma cidade e clique em buscar.</p>
                </div>
            </div>

            <div id="dicas-manutencao-container" style="display: none;">
                <h3>Dicas de Manutenção (API)</h3>
                <button id="btn-buscar-dicas">Ver Dicas</button>
                <div id="dicas-resultado" class="api-box"></div>
            </div>
        </div>
    </div>

    <!-- ================================== -->
    <!-- MODAL DE LOGIN/REGISTRO            -->
    <!-- ================================== -->
    <div id="modal-login" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="fecharModalAuth()">&times;</button>
            <h2 id="auth-form-title">Acesse sua Garagem</h2>
            <p id="auth-form-subtitle" style="margin-bottom: 20px; color: var(--cor-texto-secundario); text-align: center;">Faça login ou registre-se para salvar suas manutenções e acessar recursos exclusivos.</p>
            
            <form id="form-auth">
                <label for="auth-email">Email:</label>
                <input type="email" id="auth-email" placeholder="seu@email.com" required>
                
                <label for="auth-password">Senha:</label>
                <input type="password" id="auth-password" placeholder="••••••••" required>
                
                <button type="submit" id="btn-submit-auth">Entrar</button>
            </form>
            
            <p style="text-align: center; margin-top: 15px;">
                <a href="#" id="link-toggle-auth" class="text-link">Não tem uma conta? Registre-se</a>
            </p>

            <hr>
            
            <button id="btn-continuar-sem-login" class="btn-secondary" style="background: var(--cor-borda); color: var(--cor-texto-principal); width: 100%;">
                Continuar sem login por agora
            </button>
        </div>
    </div>

    <!-- ÁUDIO E CONTROLES -->
    <audio id="som-ligar" src="sounds/car_start.mp3" preload="auto"></audio>
    <audio id="som-desligar" src="sounds/car_stop.mp3" preload="auto"></audio>
    <audio id="som-acelerar" src="sounds/car_accelerate.mp3" preload="auto"></audio>
    <audio id="som-frear" src="sounds/car_brake.mp3" preload="auto"></audio>
    <audio id="som-buzina" src="sounds/car_horn.mp3" preload="auto"></audio>
    <div class="audio-controls">
        <label for="volume-control">Volume:</label>
        <input type="range" id="volume-control" min="0" max="1" step="0.1" value="0.5">
    </div>

    <!-- MODAL DE EDIÇÃO -->
    <div id="modal-editar" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="fecharModalEdicao()">&times;</button>
            <h2>Editar Veículo</h2>
            <form id="form-edit-veiculo">
                <input type="hidden" id="edit-veiculo-id">
                <label for="edit-tipo-veiculo">Tipo:</label>
                <select id="edit-tipo-veiculo" required>
                    <option value="Carro">Carro</option>
                    <option value="CarroEsportivo">Carro Esportivo</option>
                    <option value="Caminhao">Caminhão</option>
                </select>
                <label for="edit-placa-veiculo">Placa:</label>
                <input type="text" id="edit-placa-veiculo" required>
                <label for="edit-marca-veiculo">Marca:</label>
                <input type="text" id="edit-marca-veiculo" required>
                <label for="edit-modelo-veiculo">Modelo:</label>
                <input type="text" id="edit-modelo-veiculo" required>
                <label for="edit-ano-veiculo">Ano:</label>
                <input type="number" id="edit-ano-veiculo" required>
                <label for="edit-cor-veiculo">Cor:</label>
                <input type="text" id="edit-cor-veiculo" required>
                <button type="submit">Salvar Alterações</button>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>